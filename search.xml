[{"title":"mysql安装那点事儿","url":"http://grooes.com/2017/09/17/mysql安装那点事儿/","content":"<blockquote>\n<p>安装mysql</p>\n</blockquote>\n<p>rpm -qa | grep mysql　　// 这个命令就会查看该操作系统上是否已经安装了mysql数据库<br><br>rpm -e mysql　　// 普通删除模式<br><br>rpm -e –nodeps mysql　　// 强力删除模式，如果使用上面命令删除时，提示有依赖的其它文件，则用该命令可以对其进行强力删除<br><br>yum list | grep mysql     //查看yum上提供的mysql数据库可下载的版本<br><br>yum install -y mysql-server mysql mysql-deve    //下载<br><br>rpm -qi mysql-server    //查看mysql版本<br><br>service mysqld start    //启动mysql<br><br>service mysqld restart    //重启mysql<br><br>chkconfig –list | grep mysqld    //查看mysql服务是不是开机自动启动<br><br>mysqld             0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭<br><br>chkconfig mysqld on    //设置成开机启动，这样就不用每次都去手动启动了<br><br>/usr/bin/mysqladmin -u root password ‘root’    //设置账号密码<br><br>mysql -u root -p    //进入mysql数据库<br><br>Enter password:        //输入密码即可<br><br>完毕！<br></p>\n<blockquote>\n<p>centos6.6安装mysql5.7.17</p>\n</blockquote>\n<p>因用yum安装的是比较古老的mysql版本，所以需要升级最新版本<br><br>首先查看安装的mysql，需要全部移除<br><br>rpm -qa | grep mysql<br><br>mysql-community-common-5.1.17-1.el6.x86_64<br><br>mysql-community-libs-5.2.17-1.el6.x86_64<br><br>mysql-community-server-5.1.17-1.el6.x86_64<br><br>mysql-community-client-5.1.17-1.el6.x86_64<br><br>一共四个需要全部删除<br><br>rpm -e –nodeps mysql-community-common-5.1.17-1.el6.x86_64<br><br>rpm -e –nodeps mysql-community-libs-5.2.17-1.el6.x86_64<br><br>rpm -e –nodeps mysql-community-server-5.1.17-1.el6.x86_64<br><br>rpm -e –nodeps mysql-community-client-5.1.17-1.el6.x86_64<br><br>rpm -qa | grep mysql<br><br>确保没有了mysql<br></p>\n<p>进入：<a href=\"https://dev.mysql.com/downloads/file/?id=467446\" target=\"_blank\" rel=\"external\">https://dev.mysql.com/downloads/file/?id=467446</a><br><br>下载到的包：mysql-5.7.17-1.el6.x86_64.rpm-bundle.tar<br><br>cd /tmp<br><br>rz mysql-5.7.17-1.el6.x86_64.rpm-bundle.tar<br><br>tar -xvf mysql-5.7.17-1.el6.x86_64.rpm-bundle.tar<br><br>rpm -ivh mysql-community-common-5.7.17-1.el6.x86_64.rpm<br><br>rpm -ivh mysql-community-libs-5.7.17-1.el6.x86_64.rpm<br><br>rpm -ivh mysql-community-client-5.7.17-1.el6.x86_64.rpm<br><br>rpm -ivh mysql-community-server-5.7.17-1.el6.x86_64.rpm<br><br>chmod 777 -R /var/lib/mysql<br><br>service mysqld start<br><br>MySQL Daemon failed to start.<br><br>正在启动 mysqld： [失败]<br><br>getenforce<br><br>Enforcing<br><br>setenforce 0<br><br>service mysqld start<br><br>正在启动 mysqld： [确定]<br><br>mysql<br><br>ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: NO)<br><br>尼玛，我怎么知道密码？我都没设置密码<br><br>shell&gt;/usr/bin/mysqld_safe –skip-grant-tables &amp;<br><br>shell&gt;mysql -u root -p<br><br>下面的密码直接键入回车即可.<br><br>mysql&gt;use mysql<br><br>mysql&gt;update mysql.user set authentication_string=PASSWORD(‘root’) where user=’root’ and host=’localhost’;<br><br>mysql&gt;flush privileges;<br><br>mysql&gt;exit;<br><br>shell&gt;mysql -u root -p<br><br>输入密码即可<br><br>完毕！<br><br>突然发现在关闭服务器后去启动mysql的时候又启动失败了<br><br>猜想是getenforce，于是乎执行getenforce<br><br>竟然成了Enforcing，如果每次启动都这样，岂不是很累，于是乎不能忍<br><br>google了下，永久解决办法是设置永久性的<br><br>shell&gt;vi /etc/sysconfig/selinux<br><br>SELINUX=disabled 设置成这样既可，打开是知道共有三个值可以选择的<br><br>done!<br><br>然后进入<br>shell&gt;mysql -u root -p<br><br>输入密码后执行<br><br>mysql&gt;show databases;<br><br>ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.<br><br>错误解决办法：<br><br>mysql&gt;SET PASSWORD= PASSWORD(‘new password’);<br><br>mysql&gt;ALTER USER ‘root’@’localhost’ PASSWORD EXPIRE NEVER;<br><br>mysql&gt;flush privileges;<br><br>mysql&gt;exit;<br><br>重新登录既可<br><br>done!<br></p>\n","categories":[],"tags":["linux","mysql"]},{"title":"PHP7环境搭建那点事儿","url":"http://grooes.com/2017/09/17/PHP7环境搭建那点事儿/","content":"<blockquote>\n<p>安装包准备</p>\n</blockquote>\n<ul>\n<li>nginx-1.11.6.tar.gz</li>\n<li>google-perftools-1.6.tar.gz</li>\n<li>libevent-2.0.22-stable.tar.gz</li>\n<li>libiconv-1.13.1.tar.gz</li>\n<li>libmcrypt-2.5.8.tar.gz</li>\n<li>libmemcached-1.0.18.tar.gz</li>\n<li>m9php-php7.tar.gz</li>\n<li>mcrypt-2.6.8.tar.gz</li>\n<li>memcache-3.0.8.tgz</li>\n<li>memcached-1.4.34.tar.gz</li>\n<li>mhash-0.9.9.9.tar.gz</li>\n<li>pecl-memcache-php7.tar.gz</li>\n<li>php-7.0.14.tar.gz</li>\n<li>php-memcached-master.tar.gz</li>\n<li>phpredis-develop.tar.gz</li>\n<li>protobuf-master.tar.gz</li>\n</ul>\n<blockquote>\n<p>环境准备</p>\n</blockquote>\n<ul>\n<li>yum -y install lrzsz（为了运用rz命令把本地包上次上去）</li>\n<li>yum -y install wget(为了下载包)</li>\n<li>yum -y install zip unzip(为了解压包)</li>\n<li>yum -y install gcc(安装gcc)</li>\n<li>yum -y install openssl openssl-devel(安装openssl)</li>\n<li>yum -y install pcre*(安装pcre)</li>\n<li>yum -y install gcc gcc-c++(安装c++)</li>\n<li>yum -y install libxml2<em>(安装相关libxml2</em>)</li>\n<li>yum -y install curl<em>(安装curl</em>相关)</li>\n<li>yum -y install curl-devel(安装curl-devel)</li>\n<li>yum -y install libpng*(安装libpng相关)</li>\n</ul>\n<h4 id=\"相关环境搭建\"><a href=\"#相关环境搭建\" class=\"headerlink\" title=\"相关环境搭建\"></a>相关环境搭建</h4><blockquote>\n<p>安装nginx</p>\n</blockquote>\n<p>tar zxf nginx-1.11.6.tar.gz<br><br>cd nginx-1.11.6<br><br>./configure –prefix=/usr/local/nginx –user=www –group=www –with-http_stub_status_module –with-http_flv_module –with-http_ssl_module<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>启动nginx</p>\n</blockquote>\n<p>/usr/local/nginx/sbin/nginx<br><br>报错：nginx: [emerg] getpwnam(“www”) failed<br><br>解决方式1：在nginx.conf中 把user nobody的注释去掉既可<br><br>解决方式2：/usr/sbin/groupadd -f www            /usr/sbin/useradd -g www www<br></p>\n<p>本机浏览器输入：<a href=\"http://ip/\" target=\"_blank\" rel=\"external\">http://ip/</a><br><br>成功标识：Welcome to nginx!<br><br>失败标识：考虑关闭防火墙或者打开80端口即可<br></p>\n<blockquote>\n<p>安装libiconv</p>\n</blockquote>\n<p>tar zxf libiconv-1.13.1.tar.gz<br><br>cd libiconv-1.13.1/<br><br>./configure –prefix=/usr/local/libiconv<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>安装libevent</p>\n</blockquote>\n<p>tar zxvf libevent-2.0.22-stable.tar.gz <br><br>cd libevent-2.0.22-stable<br><br>./configure –prefix=/usr/local/libevent<br><br>make &amp;&amp; make test &amp;&amp; make install<br></p>\n<blockquote>\n<p>安装libmcrypt</p>\n</blockquote>\n<p>tar zxf libmcrypt-2.5.8.tar.gz<br><br>cd libmcrypt-2.5.8/<br><br>./configure<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>安装mhash</p>\n</blockquote>\n<p>tar zxf mhash-0.9.9.9.tar.gz<br><br>cd mhash-0.9.9.9<br><br>./configure<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>开启软连接</p>\n</blockquote>\n<p>ln -s /usr/local/lib/libmcrypt.la /usr/lib/libmcrypt.la<br><br>ln -s /usr/local/lib/libmcrypt.so /usr/lib/libmcrypt.so<br><br>ln -s /usr/local/lib/libmcrypt.so.4 /usr/lib/libmcrypt.so.4<br><br>ln -s /usr/local/lib/libmcrypt.so.4.4.8 /usr/lib/libmcrypt.so.4.4.8<br><br>ln -s /usr/local/lib/libmhash.a /usr/lib/libmhash.a<br><br>ln -s /usr/local/lib/libmhash.la /usr/lib/libmhash.la<br><br>ln -s /usr/local/lib/libmhash.so /usr/lib/libmhash.so<br><br>ln -s /usr/local/lib/libmhash.so.2 /usr/lib/libmhash.so.2<br><br>ln -s /usr/local/lib/libmhash.so.2.0.1 /usr/lib/libmhash.so.2.0.1<br><br>ln -s /usr/local/bin/libmcrypt-config /usr/bin/libmcrypt-config<br></p>\n<blockquote>\n<p>安装memcached</p>\n</blockquote>\n<p>tar -zxvf memcached-1.4.34.tar.gz<br><br>cd memcached-1.4.34<br><br>./configure –prefix=/usr/local/memcached  –with-libevent=/usr/local/libevent/<br><br>make &amp;&amp; make install<br><br>启动memcached :<br><br>/usr/local/memcached/bin/memcached -d -m 100 -u root -l 127.0.0.1 -p 11211 -c 256 -P /tmp/memcached.pid</p>\n<blockquote>\n<p>安装mcrypt</p>\n</blockquote>\n<p>tar zvxf mcrypt-2.6.8.tar.gz<br><br>cd mcrypt-2.6.8<br><br>./configure<br><br>报错：configure: error: <em>*</em> libmcrypt was not found （其实我已经安装了libmcrypt）<br><br>解决：export LD_LIBRARY_PATH=/usr/local/lib: LD_LIBRARY_PATH<br><br>./configure<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>安装php7</p>\n</blockquote>\n<p>tar zvxf php-7.0.14.tar.gz<br><br>cd php-7.0.14<br><br>./configure –prefix=/usr/local/php –with-config-file-path=/usr/local/php/etc –enable-fpm  –enable-pcntl –enable-mysqlnd –enable-opcache –enable-sockets –enable-sysvmsg –enable-sysvsem –enable-sysvshm –enable-shmop –enable-zip –enable-ftp –enable-soap –enable-xml –enable-mbstring –disable-rpath –disable-debug –disable-fileinfo –with-mysqli –with-pdo-mysql –with-pcre-regex –with-iconv –with-zlib –with-mcrypt –with-gd –with-openssl –with-mhash –with-xmlrpc –with-curl –without-pear –enable-fileinfo –with-imap-ssl<br><br>make &amp;&amp; make install<br><br>cp ./php.ini-development /usr/local/php/etc/php.ini<br><br>cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf<br><br>cp /usr/local/php/etc/php-fpm.d/www.conf.default /usr/local/php/etc/php-fpm.d/www.conf<br><br>cp -R ./sapi/fpm/php-fpm /etc/init.d/php-fpm<br></p>\n<blockquote>\n<p>安装libmemcached</p>\n</blockquote>\n<p>tar zxvf libmemcached-1.0.18.tar.gz<br><br>cd libmemcached-1.0.18<br><br>./configure –prefix=/usr/local/libmemcached  –with-memcached<br><br>make &amp;&amp; make install<br></p>\n<blockquote>\n<p>安装php-memcached扩展</p>\n</blockquote>\n<p>tar xvzf php-memcached-master.tar.gz<br><br>cd php-memcached-master<br><br>/usr/local/php/bin/phpize<br><br>./configure –enable-memcached –with-php-config=/usr/local/php/bin/php-config –with-libmemcached-dir=/usr/local/libmemcached –disable-memcached-sasl<br><br>make &amp;&amp; make install<br><br>查看是否安装成功<br><br>/usr/local/php/bin/php -m<br></p>\n<blockquote>\n<p>测试php-memcached扩展</p>\n</blockquote>\n<p>vi /usr/local/php/etc/php.ini<br><br>添加：extension=memcached.so wq!<br><br>启动fpm:/usr/local/php/sbin/php-fpm -R<br><br>验证：ps -ef | grep ‘fpm’<br><br>启动memcached:/usr/local/memcached/bin/memcached -d -m 100 -u root -l 127.0.0.1 -p 11211 -c 256 -P /tmp/memcached.pid<br><br>验证：ps -ef | grep ‘memcached’<br><br>验证是否连接成功<br><br>vi /tmp/memcached.php<br><br>输入：<br><br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">\t$m = <span class=\"keyword\">new</span> Memcached();</div><div class=\"line\">\t$m-&gt;addServer(<span class=\"string\">'127.0.0.1'</span>, <span class=\"number\">11211</span>);</div><div class=\"line\">\t$m-&gt;set(<span class=\"string\">'int'</span>, <span class=\"number\">99</span>);</div><div class=\"line\">\t$m-&gt;set(<span class=\"string\">'string'</span>, <span class=\"string\">'a simple string'</span>);</div><div class=\"line\">\t$m-&gt;set(<span class=\"string\">'array'</span>, <span class=\"keyword\">array</span>(<span class=\"number\">11</span>, <span class=\"number\">12</span>));</div><div class=\"line\">\t$m-&gt;set(<span class=\"string\">'object'</span>, <span class=\"keyword\">new</span> stdclass, time() + <span class=\"number\">300</span>);</div><div class=\"line\"></div><div class=\"line\">\tvar_dump($m-&gt;get(<span class=\"string\">'int'</span>));</div><div class=\"line\">\tvar_dump($m-&gt;get(<span class=\"string\">'string'</span>));</div><div class=\"line\">\tvar_dump($m-&gt;get(<span class=\"string\">'array'</span>));</div><div class=\"line\">\tvar_dump($m-&gt;get(<span class=\"string\">'object'</span>));</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>wq!<br><br>cd /tmp<br><br>执行：/usr/local/php/bin/php memcached.php 打印成功即可<br></p>\n<blockquote>\n<p>测试php-mysql扩展</p>\n</blockquote>\n<p>vi /tmp/mysql.php<br><br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">\t$pdo = <span class=\"keyword\">new</span> PDO(<span class=\"string\">\"mysql:host=hostname;dbname=databasename\"</span>,<span class=\"string\">\"root\"</span>,<span class=\"string\">\"\"</span>);</div><div class=\"line\">\t$rs = $pdo -&gt; query(<span class=\"string\">\"select * from test\"</span>);</div><div class=\"line\">\t<span class=\"keyword\">while</span>($row = $rs -&gt; fetch())&#123;</div><div class=\"line\">\t\tprint_r($row);</div><div class=\"line\">\t&#125;</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>wq!<br><br>cd /tmp<br><br>执行：/usr/local/php/bin/php mysql.php 打印成功即可</p>\n<blockquote>\n<p>安装php-redis扩展</p>\n</blockquote>\n<p>tar xvf phpredis-develop.tar.gz<br><br>cd phpredis-develop<br><br>/usr/local/php/bin/phpize<br><br>./configure –with-php-config=/usr/local/php/bin/php-config<br><br>make &amp;&amp; make install<br><br>vi /usr/local/php/etc/php.ini<br><br>输入：extension=redis.so<br><br>wq!<br><br>查看是否安装成功<br><br>/usr/local/php/bin/php -m<br></p>\n<blockquote>\n<p>安装m9php-php7扩展</p>\n</blockquote>\n<p>tar -zxvf m9php-php7.tar.gz<br><br>cd m9php/m9php<br><br>/usr/local/php/bin/phpize<br><br>./configure –with-php-config=/usr/local/php/bin/php-config<br><br>make &amp;&amp; make install<br><br>vi /usr/local/php/etc/php.ini<br><br>输入：extension=m9php.so<br><br>wq!<br><br>查看是否安装成功<br><br>/usr/local/php/bin/php -m<br></p>\n","categories":[],"tags":["php","linux"]},{"title":"categories","url":"http://grooes.com/categories/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://grooes.com/link/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://grooes.com/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://grooes.com/tag/index.html","content":"","categories":[],"tags":[]}]